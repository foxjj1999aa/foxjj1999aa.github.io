<html>
<style>
    #bb {
        width: 100%;
        float: left;
    }

    .item {
        width: 17.5%;
        text-align: center;
        display: block;
        background-color: transparent;
        border: 1% solid transparent;
        margin-left: 1.125%;
        margin-right: 1.125%;
        margin-bottom: 1px;
        float: left;
    }
</style>

<head>
    <title>抽獎公佈欄</title>
    <marquee id=run scrollamount=12 behavior=slide height=5%
        style="font-family: 新細明體; font-size: 140%; color: #ffff00; letter-spacing: 2pt; text-align: 置中; word-spacing: 0; border-style: ridge"
        align="middle">歡迎光臨!感謝使用本抽獎系統!</marquee>

    <div style="position:relative;">
        <img width="100%" src="https://foxjj1999aa.github.io/%E6%8A%BD%E7%8D%8E%E5%85%AC%E4%BD%88%E6%AC%84.png" alt="">
        <div style="position:absolute;top:9%;left:2%">
            <table border="1" width="50%" Height="50%">
                <tr>
                    <th width="10%"> <a href="https://foxjj1999aa.github.io/抽獎公佈欄.HTML">抽獎公佈欄</a></th>

                    <th width="10%"> <a href="https://foxjj1999aa.github.io/SearchPoint.HTML">點數查詢</a></th>

                    <th width="10%"> <a href="https://foxjj1999aa.github.io/抽獎前置.HTML">輸入點數</a></th>

                </tr>
            </table>
        </div>

    </div>

</head>

<body bgcolor="black">
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyA2zAXlG4Q2Pq_x3RUe7J_JrwdiVhBjtqI",
            authDomain: "webtest-49dac.firebaseapp.com",
            databaseURL: "https://webtest-49dac.firebaseio.com",
            projectId: "webtest-49dac",
            storageBucket: "webtest-49dac.appspot.com",
            messagingSenderId: "520140906035"
        };
        firebase.initializeApp(config);

    </script>

    <div id=bb>

    </div>
    <script src="jquery-1.8.3.min.js"></script>
    <script>
        //set the default value
        window.onload = start;
        var db = firebase.database();
        var get = [],Nnumber=[];
        var count = 19;
        var UserCount;
        var run = document.getElementById("run");
        var nn;
        var k = "&nbsp;";
        for (let i = 0; i < UserCount - 1; i++) {
            setTimeout(start, 1000);
        }

        //add input block in showBlock
        function start() {
            db.ref("Gift").once("value").then(function (snapshot) {
                UserCount = snapshot.numChildren();

                setTimeout(start1, 1000);

            });


        };

        function start1() {
            for (let i = 0; i < UserCount; i++) {
                db.ref("Gift/" + i + "/ID").once("value").then(function (snapshot) {
                    get.push(snapshot.val());
                });
                db.ref("Gift/" + i + "/Number").once("value").then(function (snapshot) {
                    Nnumber.push(snapshot.val());
                });
            }
            setTimeout(start2, 1000)
        };
        function start2() {

            for (let i = UserCount; i > 0; i--) {

                $("#bb").append('<div class="item"><input type="image" width="100%" src="https://raw.githubusercontent.com/foxjj1999aa/foxjj1999aa.github.io/master/%E4%B8%AD%E7%8D%8E.png" /><br><font color="white">' + get[i - 1] + '</font></div>');
                
            }
            setInterval(runh, 10000);

        };
        function runh() {            
            run.innerHTML = '<marquee scrollamount=12 behavior=slide>' + '恭喜' + get[count] + '中獎!'+'中了'+Nnumber[count]+'號獎品喔!'+'</marquee>';
            count=count-1;
        }

    </script>
</body>


</html>